<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Unity 编辑器拓展 | Ryouji&#39;s World</title>
  
    <link rel="icon" href="/assets/favicon.ico">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.1.1"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(/assets/avatar.png)">
        </div>
    </section>
    <section class='menu'>
        <div>Ryouji&#39;s World</div>
        
            <div>You Can (Not) Redo</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/categories/" class="Btn">
              <li>Categories</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a target="_blank" rel="noopener" href="https://github.com/soryu-ryouji">
                    <img src="/assets/github.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>Unity 编辑器拓展</h1>
    </header>

    <section>
      <h2 id="编辑器开发基础"><a href="#编辑器开发基础" class="headerlink" title="编辑器开发基础"></a>编辑器开发基础</h2><p>在Unity中存在特殊的几种文件夹：</p>
<ol>
<li>Editor</li>
<li>Resources</li>
<li>StreamingAssets</li>
<li>…</li>
</ol>
<p>Editor 文件夹用于存放编辑器功能的相关脚本方便项目的开发，在该文件夹中的脚本在打包时会被排除，不会被打包进程序。因此所有的编辑器拓展代码都会被放入 <code>Editor</code> 文件夹中。</p>
<p>开发者可以将多个 Editor 文件夹放置在 Assets 文件夹内的任何位置。例如 <code>Assets/Editor</code>文件夹或 <code>Assets/</code> 下的任意子文件夹中。</p>
<h2 id="编辑器常用类"><a href="#编辑器常用类" class="headerlink" title="编辑器常用类"></a>编辑器常用类</h2><h3 id="Rect"><a href="#Rect" class="headerlink" title="Rect"></a>Rect</h3><p>这个类型在编辑器拓展中十分常见。它以左上角为坐标原点，X往右递增，Y往下递增</p>
<blockquote>
<p>A 2D Rectangle defined by X and Y position, width and height.</p>
</blockquote>
<h3 id="布局组件"><a href="#布局组件" class="headerlink" title="布局组件"></a>布局组件</h3><p>布局组件有两种分类方法，一种分法是按照 “是否可在游戏运行时中显示” 为标准，可以分为 <code>GUI / GUILayout</code> 和 <code>EditorGUI / EditorGUILayout</code>，另一种分法是按照</p>
<h4 id="GUI-GUILayout"><a href="#GUI-GUILayout" class="headerlink" title="GUI &#x2F; GUILayout"></a>GUI &#x2F; GUILayout</h4><p><code>GUI / GUILayout</code> 主要是用于 Game 视图的基本 UI 信息显示与逻辑操作。</p>
<p>偶尔的，GUILayout除了在Game视图进行部分 runtime 的逻辑操作，还会与 EditorGUILayout 配合，用于在 Editor 编辑器模式下的扩展功能。</p>
<span id="more"></span>

<h5 id="按钮类组件"><a href="#按钮类组件" class="headerlink" title="按钮类组件"></a>按钮类组件</h5><p><strong>Button</strong></p>
<p>关键字： <code>GUILayout.Button</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//这是在Game视图中绘制GUI，所以需要继承于一个Mono</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GUITutorialDemo</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//所有GUI绘制都必须在这个函数内部： MonoBehaviour.GUI()</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;I&#x27;m a button&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Selection</strong></p>
<p>关键字： <code>GUILayout.SelectionGrid</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义多按钮选择的index</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> index;</span><br><span class="line"><span class="comment">//定义多按钮的名称</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] buttonNames = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;First&quot;</span>, <span class="string">&quot;Second&quot;</span>, <span class="string">&quot;Third&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一个参数是当前选择按钮的index。</span></span><br><span class="line"><span class="comment">//第二个参数是多个按钮的名称，数组长度决定了按钮个数。</span></span><br><span class="line"><span class="comment">//第三个参数是表示一行按钮有多少个，这里是2，表示一行最多2个按钮。</span></span><br><span class="line">index = GUILayout.SelectionGrid(index, buttonNames, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Toolbar</strong></p>
<p>关键字： <code>GUILayout.Toolbar</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> index;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] buttonNames = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;First&quot;</span>, <span class="string">&quot;Second&quot;</span>, <span class="string">&quot;Third&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">//第一个参数是当前选择 按钮 的index。</span></span><br><span class="line"><span class="comment">//第二个参数是多个 按钮 的名称，数组长度决定了 按钮 个数。</span></span><br><span class="line">index = GUILayout.Toolbar(index, buttonNames);</span><br></pre></td></tr></table></figure>

<p><strong>Toggle</strong></p>
<p>关键字： <code>GUILayout.Toggle</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//记录当前toggle真值情况</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> toggleValue;</span><br><span class="line">...</span><br><span class="line"><span class="comment">//第二个参数是Toggle文本信息</span></span><br><span class="line">toggleValue = GUILayout.Toggle(toggleValue, <span class="string">&quot;This is a toggle&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="文本标签类"><a href="#文本标签类" class="headerlink" title="文本标签类"></a>文本标签类</h5><p><strong>Label</strong></p>
<p>关键字： <code>GUILayout.Label</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">GUILayout.Label(<span class="string">&quot;This is a Label Text&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>TextField</strong></p>
<p>关键字： <code>GUILayout.TextArea</code>， <code>GUILayout.TextField</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> areaText = <span class="string">&quot;multi-line text&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> singleText = <span class="string">&quot;single-line text..&quot;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// Make a multi-line text field where the use can edit a string</span></span><br><span class="line">areaText = GUILayout.TextArea(areaText);</span><br><span class="line"><span class="comment">//Make a single-line text field where the use can edit a string</span></span><br><span class="line">singleText = GUILayout.TextField(singleText);</span><br><span class="line"><span class="comment">//TextArea 支持多行编辑，就是回车之后文本也能换行。</span></span><br><span class="line"><span class="comment">//Textfield 不支持多行编辑，回车之后没反应。</span></span><br><span class="line"><span class="comment">//PS: 如果文本有类似\n的换行符，文本也会换行，只是不支持换行编辑而已）</span></span><br></pre></td></tr></table></figure>

<h5 id="滚动滑条类"><a href="#滚动滑条类" class="headerlink" title="滚动滑条类"></a>滚动滑条类</h5><p><strong>Slider</strong></p>
<p>关键字：<code>GUILayout.HorizontalSlider</code>， <code>GUILayout.VerticalSlider</code></p>
<p>这里只展示 Horizontal Slider 的用法，Vertical Slider 的用法同理。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_SliderValue;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    GUILayout.Label(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">    GUILayout.BeginHorizontal(m_ScrollPosition)</span><br><span class="line">    &#123;</span><br><span class="line">    	GUILayout.HorizontalSlider(m_SliderValue, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    GUILayout.EndHorizontal();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ScrollBar</strong></p>
<p>关键字： <code>GUILayout.HorizontalScrollbar</code>， <code>GUILayout.VerticalScrollbar</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> horizontalValue = <span class="number">0</span>; <span class="comment">//滑动条数值</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> verticalValue = <span class="number">0</span>; <span class="comment">//滑动条数值</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> blockSize = <span class="number">10</span>; <span class="comment">//滑动块大小</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> leftValue = <span class="number">0</span>; <span class="comment">//最左侧/最上侧数值</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> rightValue = <span class="number">100</span>; <span class="comment">//最右侧/最下侧数值</span></span><br><span class="line">...</span><br><span class="line">horizontalValue = GUILayout.HorizontalScrollbar(horizontalValue, blockSize, leftValue, rightValue, GUILayout.Width(<span class="number">300</span>));</span><br><span class="line">verticalValue = GUILayout.VerticalScrollbar(verticalValue, blockSize, leftValue, rightValue);</span><br></pre></td></tr></table></figure>

<h5 id="区块布局类"><a href="#区块布局类" class="headerlink" title="区块布局类"></a>区块布局类</h5><p><strong>Box</strong></p>
<p>关键字： <code>GUILayout.Box</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//后两个参数定义了box area的长宽，后文会介绍参数意义</span></span><br><span class="line">GUILayout.Box(<span class="string">&quot;Box Area&quot;</span>, GUILayout.Width(<span class="number">200</span>), GUILayout.Height(<span class="number">200</span>));</span><br></pre></td></tr></table></figure>

<p><strong>Area</strong></p>
<p>关键字： <code>GUILayout.BeginArea</code>， <code>GUILayout.EndArea</code></p>
<p>布局方式分为自动布局 <code>(GUILayout)</code> 和手动布局 <code>(Area)</code>，在 <code>Area</code> 模式下，开发者可以自己自己指定窗口的大小，并且可以以坐标点的方式指定该区域内所有元素的位置。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">GUILayout.BeginArea(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>));</span><br><span class="line">&#123;</span><br><span class="line">    GUI.Label(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>), <span class="string">&quot;This is a test&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">GUILayout.EndArea();</span><br></pre></td></tr></table></figure>

<p><strong>Horizontal &#x2F; Vertical</strong></p>
<p>关键字: <code>GUILayout.BeginHorizontal</code>, <code>GUILayout. EndHorizontal</code></p>
<p> <code>GUILayout.BeginVertical</code>, <code>GUILayout.EndVertical</code></p>
<p>如果需要对界面的布局进行调整，可以使用 Horizontal 和 Vertical 方法，将需要排版的元素放在 <code>BeginXXX</code> 和 <code>EndXXX</code> 之间。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">GUILayout.BeginHorizontal()</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;Button Click&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;Button Clicked&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">GUILayout.EndHorizontal()</span><br><span class="line"></span><br><span class="line">GUILayout.BeginVertical()</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;Button Click&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;Button Clicked&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">GUILayout.EndVertical()</span><br></pre></td></tr></table></figure>

<p>如果希望让代码结构更加直观，可以使用 c# 自身的特性，将需要排版的代码使用花括号包起来。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">GUILayout.BeginHorizontal()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;Button Click&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;Button Clicked&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">GUILayout.EndHorizontal()</span><br><span class="line"></span><br><span class="line">GUILayout.BeginVertical()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;Button Click&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;Button Clicked&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">GUILayout.EndVertical()</span><br></pre></td></tr></table></figure>

<p><strong>ScrollView</strong></p>
<p>关键字：<code>GUILayout.BeginScrollView</code>，<code>GUILayout.EndScrollView</code></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Vector2 scrollViewRoot; <span class="comment">//定义滑动窗口当前滑动值，如果不使用这个vector2，滑动窗口将无法滑动</span></span><br><span class="line">...</span><br><span class="line">GUILayout.BeginArea(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">400</span>)); <span class="comment">//定义可视化区域</span></span><br><span class="line">scrollViewRoot = GUILayout.BeginScrollView(scrollViewRoot); <span class="comment">//定义滑动视图</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Buttons&quot;</span>, GUILayout.Height(<span class="number">200</span>)); <span class="comment">//定义组件1，高度200</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Buttons&quot;</span>, GUILayout.Height(<span class="number">200</span>)); <span class="comment">//定义组件2，高度200</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Buttons&quot;</span>, GUILayout.Height(<span class="number">200</span>)); <span class="comment">//定义组件3，高度200</span></span><br><span class="line">GUILayout.EndScrollView(); <span class="comment">//结束滑动窗口</span></span><br><span class="line">GUILayout.EndArea();<span class="comment">// 结束区域定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//由于区域是400x400，有3个高度为200的button，3*200&gt;400，视图内容会越界，滑动窗口才有意义。</span></span><br></pre></td></tr></table></figure>

<p><strong>Space</strong></p>
<p>关键字： <code>GUILayout.Space</code>，<code>GUILayout.FlexibleSpace</code></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">GUILayout.BeginArea(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">400</span>)); <span class="comment">//定义400 x 400 可视化区域</span></span><br><span class="line"></span><br><span class="line">GUILayout.BeginHorizontal(); <span class="comment">//开始水平布局</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;B1&quot;</span>, GUILayout.Width(<span class="number">100</span>)); <span class="comment">//定义宽度100的按钮</span></span><br><span class="line">GUILayout.FlexibleSpace(); <span class="comment">//插入一个“灵活的”空白组件</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;B2&quot;</span>, GUILayout.Width(<span class="number">50</span>)); <span class="comment">//定义宽度50的按钮</span></span><br><span class="line">GUILayout.EndHorizontal(); <span class="comment">//结束水平布局</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;length&quot;</span>); <span class="comment">//定义默认宽度按钮，其宽度会自动扩展到区域宽度：400</span></span><br><span class="line"></span><br><span class="line">GUILayout.Space(<span class="number">100</span>); <span class="comment">//手动间隔100个像素单位</span></span><br><span class="line"></span><br><span class="line">GUILayout.BeginHorizontal(); <span class="comment">//开始水平布局</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;B1&quot;</span>, GUILayout.Width(<span class="number">100</span>)); <span class="comment">//定义宽度100的按钮</span></span><br><span class="line">GUILayout.Space(<span class="number">200</span>); <span class="comment">//手动间隔200个像素单位</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;B2&quot;</span>, GUILayout.Width(<span class="number">50</span>));<span class="comment">//定义宽度50的按钮</span></span><br><span class="line">GUILayout.EndHorizontal();<span class="comment">//结束水平布局</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;length&quot;</span>); <span class="comment">//定义默认宽度按钮，其宽度会自动扩展到区域宽度：400</span></span><br><span class="line"></span><br><span class="line">GUILayout.EndArea(); <span class="comment">//结束区域定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//两者区别就在上述样例图片中，这是手动间隔排版所用方法</span></span><br></pre></td></tr></table></figure>

<p><strong>GUILayoutOption</strong></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">GUILayout.Width(<span class="built_in">float</span> width) <span class="comment">// 设置控件的宽度</span></span><br><span class="line">GUILayout.Height(<span class="built_in">float</span> height) <span class="comment">// 设置控件的高度</span></span><br><span class="line">GUILayout.MinWidth(<span class="built_in">float</span> width) <span class="comment">// 设置控件的最小宽度</span></span><br><span class="line">GUILayout.MinHeight(<span class="built_in">float</span> height) <span class="comment">// 设置控件的最小高度</span></span><br><span class="line">GUILayout.MaxWidth(<span class="built_in">float</span> width)<span class="comment">// 设置控件的最大宽度</span></span><br><span class="line">GUILayout.MaxHeight(<span class="built_in">float</span> width) <span class="comment">// 设置控件的最大高度</span></span><br><span class="line">GUILayout.ExpandHeight(<span class="built_in">bool</span> expand) <span class="comment">// 是否允许自动扩展高度</span></span><br><span class="line">GUILayout.ExpandWidth(<span class="built_in">bool</span> expand) <span class="comment">// 是否允许自动扩展宽度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义宽度700的区域</span></span><br><span class="line">GUILayout.BeginArea(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">700</span>, <span class="number">400</span>));</span><br><span class="line"><span class="comment">//默认button，会自动扩展宽度</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Default Button&quot;</span>);</span><br><span class="line"><span class="comment">//定义100宽度，不会自动扩展</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Button with 100 width&quot;</span>, GUILayout.Width(<span class="number">100</span>));</span><br><span class="line"><span class="comment">//定义最小宽度，会自动扩展，由于扩展的目标是700，所以与默认button相同</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Button with 200 minWidth&quot;</span>, GUILayout.MinWidth(<span class="number">200</span>));</span><br><span class="line"><span class="comment">//定义最大宽度，会自动扩展，但是扩展目标是700，大于300，所以还是300宽度</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Button with 300 maxWidth&quot;</span>, GUILayout.MaxWidth(<span class="number">300</span>));</span><br><span class="line"><span class="comment">//禁止自动扩展，宽度是文本自适应宽度。</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;Button with false expand&quot;</span>, GUILayout.ExpandWidth(<span class="literal">false</span>)); </span><br><span class="line"><span class="comment">//结束区域定义</span></span><br><span class="line">GUILayout.EndArea();</span><br></pre></td></tr></table></figure>

<h4 id="EditorGUI-EditorGUILayout"><a href="#EditorGUI-EditorGUILayout" class="headerlink" title="EditorGUI &#x2F; EditorGUILayout"></a>EditorGUI &#x2F; EditorGUILayout</h4><h5 id="编辑器的基本面板"><a href="#编辑器的基本面板" class="headerlink" title="编辑器的基本面板"></a>编辑器的基本面板</h5><p><strong>EditorWindow</strong></p>
<p>关键字：<code>UnityEditor.EditorWindow</code>，<code>MenuItem</code></p>
<p><code>EditorWindow</code> 所有的GUI绘制，都是在 <code>OnGUI()</code> 方法中。</p>
<p><code>MenuItem</code> 属性用于向主菜单和监视面板上下文菜单中添加菜单项，它能够将任何静态函数转变为菜单命令。</p>
<p><code>[MenuItem(&quot;EditorExtension/Menu/Hello Unity&quot;)]</code>，这个 <code>Attribute</code> 需要引用 <code>UnityEditor</code> 的命名空间。用于拓展Unity的菜单栏。</p>
<p><code>EditorExtension/Menu/Hello Unity</code>是菜单的路径，也可以添加到默认的菜单中如 <code>Component/UnitEditor</code></p>
<p><code>public static void HelloUnity()</code>为点击该选项后的调用函数，需注意的是函数必须是静态的。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;`</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MenuItemExample</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;EditorExtension/Menu/Hello Unity&quot;</span>)</span>]</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">HelloUnity</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;Hello Unity&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;EditorExtension/Menu/Open Bilibili&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenBilibili</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Application.OpenURL(<span class="string">&quot;https://bilibili.com&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Inspector</strong></p>
<p>关键字：<code>UnityEditor.Editor</code>， <code>CustomEditor</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Mono 部分代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TutorialMono</span> : <span class="title">MonoBehaviour</span> <span class="comment">//基本就是个空的Mono</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Editor 部分代码</span></span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定自定义Editor所要绑定的Mono类型，这里就是typeof(TutorialMono)</span></span><br><span class="line">[<span class="meta">CustomEditor(typeof(TutorialMono))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TutorialMonoInspector</span> : <span class="title">Editor</span> <span class="comment">//继承Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> TutorialMono m_target; <span class="comment">//在Inspector上显示的实例目标</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当对象活跃时（在Inspector中显示时），unity自动调用此函数</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_target = target <span class="keyword">as</span> TutorialMono; <span class="comment">//绑定target，target官方解释： The object being inspected</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 重写OnInspectorGUI，之后所有的GUI绘制都在此方法中。</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnInspectorGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//调用父类方法绘制一次GUI，TutorialMono中原本的可序列化数据等会在这里绘制一次。</span></span><br><span class="line">        <span class="keyword">base</span>.OnInspectorGUI();</span><br><span class="line">        <span class="comment">//如果不调用父类方法，则这个Mono的Inspector全权由下面代码绘制。</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;这是一个按钮&quot;</span>))   <span class="comment">//自定义按钮</span></span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="按钮类组件-1"><a href="#按钮类组件-1" class="headerlink" title="按钮类组件"></a>按钮类组件</h5><p><strong>Button</strong></p>
<p>关键字： <code>GUILayout.Button</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;这是一个按钮&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;按了下按钮&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>DropdownButton</strong></p>
<p>和Button的区别大致是 Button是鼠标抬起触发，Dropdown是鼠标按下就触发。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> GUIContent content = <span class="keyword">new</span> GUIContent(<span class="string">&quot;DropdownButton&quot;</span>); <span class="comment">//定义一下显示内容</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (EditorGUILayout.DropdownButton(content, FocusType.Passive))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;据说是按下就触发，而不是抬起&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="显示域"><a href="#显示域" class="headerlink" title="显示域"></a>显示域</h5><p><strong>ObjectField</strong></p>
<p>关键字：<code>EditorGUILayout.ObjectField</code></p>
<p>这个组件几乎是必用控件，Editor的根本目的就是在编辑模式下，对某些资源对象（Object）进行“增删改查”。</p>
<p>同时，这个Object不只是 GameObject，只要是继承 <code>UnityEngine.Object</code> 的类型，都可以用这个方法来获取，比如：Texture，Material等等。</p>
<p>值得注意的是，所有的 <code>Field</code> 类，如果不把数据放在左边赋值，那么在输入框内的修改将不会保存。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> GameObject m_objectValue; <span class="comment">//定义Object</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">//第一个参数： 目标Object</span></span><br><span class="line"><span class="comment">//第二个参数： Object的类型</span></span><br><span class="line"><span class="comment">//第三个参数： 是否允许赋值场景对象（一般是赋值Project中的Asset资源对象）</span></span><br><span class="line"><span class="comment">//最后需要一个【as】进行类型转换</span></span><br><span class="line">m_objectValue = EditorGUILayout.ObjectField(m_objectValue, <span class="keyword">typeof</span>(GameObject), <span class="literal">true</span>) <span class="keyword">as</span> GameObject;</span><br></pre></td></tr></table></figure>

<p><strong>IntField</strong></p>
<p>关键字：<code>EditorGUILayout.IntField</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_intValue; <span class="comment">//定义修改内容；</span></span><br><span class="line">...</span><br><span class="line">m_intValue = EditorGUILayout.IntField(<span class="string">&quot;整型输入框&quot;</span>, m_intValue); <span class="comment">//Title + Value</span></span><br></pre></td></tr></table></figure>

<p><strong>FloatField、TextField、Vector3Field…</strong></p>
<p>关键字：FloatField， TextField，Vector3Field…</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> m_textValue;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_floatValue;</span><br><span class="line"><span class="keyword">private</span> Vector2 m_vec2;</span><br><span class="line"><span class="keyword">private</span> Vector3 m_vec3;</span><br><span class="line"><span class="keyword">private</span> Vector4 m_vec4;</span><br><span class="line"><span class="keyword">private</span> Bounds m_bounds;</span><br><span class="line"><span class="keyword">private</span> BoundsInt m_boundsInt;</span><br><span class="line">...</span><br><span class="line">m_floatValue = EditorGUILayout.FloatField(<span class="string">&quot;Float 输入：&quot;</span>, m_floatValue);</span><br><span class="line">m_textValue = EditorGUILayout.TextField(<span class="string">&quot;Text输入：&quot;</span>, m_textValue);</span><br><span class="line">m_vec2 = EditorGUILayout.Vector2Field(<span class="string">&quot;Vec2输入： &quot;</span>, m_vec2);</span><br><span class="line">m_vec3 = EditorGUILayout.Vector3Field(<span class="string">&quot;Vec3输入： &quot;</span>, m_vec3);</span><br><span class="line">m_vec4 = EditorGUILayout.Vector4Field(<span class="string">&quot;Vec4输入： &quot;</span>, m_vec4);</span><br><span class="line">m_bounds = EditorGUILayout.BoundsField(<span class="string">&quot;Bounds输入： &quot;</span>, m_bounds);</span><br><span class="line">m_boundsInt = EditorGUILayout.BoundsIntField(<span class="string">&quot;Bounds输入： &quot;</span>, m_boundsInt);</span><br></pre></td></tr></table></figure>

<p><strong>LabelField</strong></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;文本标题&quot;</span>, <span class="string">&quot;文本内容&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>TagField &#x2F; LayerField</strong></p>
<p>关键字：EditorGUILayout.TagField， EditorGUILayout.LayerField</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_layer;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> m_tag;</span><br><span class="line">...</span><br><span class="line">m_layer = EditorGUILayout.LayerField(<span class="string">&quot;层级选择&quot;</span>, m_layer);</span><br><span class="line">m_tag = EditorGUILayout.TagField(<span class="string">&quot;标签选择&quot;</span>, m_tag);</span><br></pre></td></tr></table></figure>

<p><strong>ColorField</strong></p>
<p>关键字：EditorGUILayout.ColorField</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Color m_color;</span><br><span class="line"><span class="keyword">private</span> GUIContent colorTitle = <span class="keyword">new</span> GUIContent(<span class="string">&quot;颜色选择&quot;</span>);</span><br><span class="line">...</span><br><span class="line"><span class="comment">//着重强调一下这个重载方法</span></span><br><span class="line"><span class="comment">//第一个参数： GUIContent，通常拿来作为Title</span></span><br><span class="line"><span class="comment">//第二个参数： Color，目标修改数据</span></span><br><span class="line"><span class="comment">//第三个参数： bool ，是否显示拾色器</span></span><br><span class="line"><span class="comment">//第四个参数： bool ，是否显示透明度通道</span></span><br><span class="line"><span class="comment">//第五个参数： bool ，是否支持HDR。</span></span><br><span class="line">m_color = EditorGUILayout.ColorField(colorTitle, m_color, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p><strong>CurveField</strong></p>
<p>关键字：EditorGUILayout.CurveField， AnimationCurve</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> AnimationCurve m_curve = AnimationCurve.Linear(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">...</span><br><span class="line">m_curve = EditorGUILayout.CurveField(<span class="string">&quot;动画曲线：&quot;</span>, m_curve);</span><br></pre></td></tr></table></figure>

<h5 id="枚举选择"><a href="#枚举选择" class="headerlink" title="枚举选择"></a>枚举选择</h5><p><strong>单选枚举（EnumPopup）</strong></p>
<p>关键字：EditorGUILayout.EnumPopup</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">enum</span> TutorialEnum</span><br><span class="line">&#123;</span><br><span class="line">    One,</span><br><span class="line">    Two,</span><br><span class="line">    Three</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> TutorialEnum m_enum;</span><br><span class="line">...</span><br><span class="line">m_enum = (TutorialEnum)EditorGUILayout.EnumPopup(<span class="string">&quot;枚举选择&quot;</span>, m_enum);</span><br></pre></td></tr></table></figure>

<p><strong>多选枚举（EnumFlagsField）</strong></p>
<p>关键字：EditorGUILayout.EnumFlagsField</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">enum</span> TutorialEnum</span><br><span class="line">&#123;</span><br><span class="line">    None = <span class="number">0</span>,</span><br><span class="line">    OneAndTwo = One | Two,</span><br><span class="line">    One = <span class="number">1</span> &lt;&lt; <span class="number">0</span>,</span><br><span class="line">    Two = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line">    Three = <span class="number">1</span> &lt;&lt; <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> TutorialEnum m_enum;</span><br><span class="line">...</span><br><span class="line">m_enum = (TutorialEnum)EditorGUILayout.EnumFlagsField(<span class="string">&quot;枚举多选&quot;</span>, m_enum);</span><br></pre></td></tr></table></figure>

<p><strong>单选&#x2F;多选整型（IntPopup&#x2F;MaskField）</strong></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_singleInt;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_multiInt;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] intSelections = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;整数10&quot;</span>, <span class="string">&quot;整数20&quot;</span>, <span class="string">&quot;整数30&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] intMultiSelections = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;1号&quot;</span>, <span class="string">&quot;2号&quot;</span>, <span class="string">&quot;3号&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span>[] intValues = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span> &#125;;</span><br><span class="line">...</span><br><span class="line">m_singleInt = EditorGUILayout.IntPopup(<span class="string">&quot;整数单选框&quot;</span>, m_singleInt, intSelections, intValues);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">$&quot;m_singleInt is <span class="subst">&#123;m_singleInt&#125;</span>&quot;</span>);</span><br><span class="line">m_multiInt = EditorGUILayout.MaskField(<span class="string">&quot;整数多选框&quot;</span>, m_multiInt, intMultiSelections);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">$&quot;m_multiInt is <span class="subst">&#123;m_multiInt&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="折叠栏"><a href="#折叠栏" class="headerlink" title="折叠栏"></a>折叠栏</h5><p><strong>Foldout</strong></p>
<p>关键字： <code>EditorGUILayout.Foldout</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> foldOut;</span><br><span class="line">...</span><br><span class="line">foldOut = EditorGUILayout.Foldout(foldOut, <span class="string">&quot;一般路过折叠栏&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (foldOut) <span class="comment">//只有foldout为true时，才会显示下方内容，相当于“折叠”了。</span></span><br><span class="line">&#123;</span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是折叠标签内容&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>FoldoutGroup</strong></p>
<p>关键字：<code>EditorGUILayout.BeginFoldoutHeaderGroup</code>， <code>EditorGUILayout.EndFoldoutHeaderGroup</code></p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> foldOut;</span><br><span class="line">...</span><br><span class="line">foldOut = EditorGUILayout.BeginFoldoutHeaderGroup(foldOut, <span class="string">&quot;折叠栏组&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (foldOut) <span class="comment">//只有foldout为true时，才会显示下方内容，相当于“折叠”了。</span></span><br><span class="line">&#123;</span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是折叠标签内容&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">EditorGUILayout.EndFoldoutHeaderGroup(); <span class="comment">//只不过这种折叠需要成对使用，不然会有BUG</span></span><br></pre></td></tr></table></figure>

<h5 id="开关控件"><a href="#开关控件" class="headerlink" title="开关控件"></a>开关控件</h5><p><strong>Toggle</strong></p>
<p>关键字： EditorGUILayout.Toggle，EditorGUILayout.ToggleLeft</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> toggle;</span><br><span class="line">...</span><br><span class="line">toggle = EditorGUILayout.Toggle(<span class="string">&quot;Normal Toggle&quot;</span>, toggle);</span><br><span class="line">toggle = EditorGUILayout.ToggleLeft(<span class="string">&quot;Left Toggle&quot;</span>, toggle);</span><br></pre></td></tr></table></figure>

<p><strong>ToggleGroup</strong></p>
<p>关键字：EditorGUILayout.BeginToggleGroup，EditorGUILayout.EndToggleGroup</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> toggle;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> m_inputText;</span><br><span class="line">...</span><br><span class="line">toggle = EditorGUILayout.BeginToggleGroup(<span class="string">&quot;开关组&quot;</span>, toggle);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;------Input Field------&quot;</span>);</span><br><span class="line">m_inputText = EditorGUILayout.TextField(<span class="string">&quot;输入内容：&quot;</span>, m_inputText);</span><br><span class="line">EditorGUILayout.EndToggleGroup();</span><br></pre></td></tr></table></figure>

<h5 id="滑动控件"><a href="#滑动控件" class="headerlink" title="滑动控件"></a>滑动控件</h5><p><strong>Slider</strong></p>
<p>关键字：EditorGUILayout.Slider，EditorGUILayout.IntSlider</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_sliderValue;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_sliderIntValue;</span><br><span class="line">...        </span><br><span class="line"><span class="comment">//参数详解：</span></span><br><span class="line"><span class="comment">//第一个参数： string label 控件名称标签  </span></span><br><span class="line"><span class="comment">//第二个参数： float value 滑动当前值  </span></span><br><span class="line"><span class="comment">//第三个参数： float leftValue 滑动最小值   </span></span><br><span class="line"><span class="comment">//第四个参数： float rightValue 滑动最大值</span></span><br><span class="line">m_sliderValue = EditorGUILayout.Slider(<span class="string">&quot;滑动条Sample：&quot;</span>, m_sliderValue, <span class="number">0.123f</span>, <span class="number">7.77f</span>);</span><br><span class="line"><span class="comment">//参数同上</span></span><br><span class="line">m_sliderIntValue = EditorGUILayout.IntSlider(<span class="string">&quot;整数值滑动条&quot;</span>, m_sliderIntValue, <span class="number">2</span>, <span class="number">16</span>);</span><br></pre></td></tr></table></figure>

<p><strong>MinMaxSlider</strong></p>
<p>关键字：EditorGUILayout.MinMaxSlider</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_leftValue;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_rightValue;</span><br><span class="line">...</span><br><span class="line">EditorGUILayout.MinMaxSlider(<span class="string">&quot;双块滑动条&quot;</span>, <span class="keyword">ref</span> m_leftValue, <span class="keyword">ref</span> m_rightValue, <span class="number">0.25f</span>, <span class="number">10.25f</span>);</span><br><span class="line">EditorGUILayout.FloatField(<span class="string">&quot;滑动左值：&quot;</span>, m_leftValue);</span><br><span class="line">EditorGUILayout.FloatField(<span class="string">&quot;滑动右值：&quot;</span>, m_rightValue);</span><br></pre></td></tr></table></figure>

<h5 id="其他控件"><a href="#其他控件" class="headerlink" title="其他控件"></a>其他控件</h5><p><strong>HelpBox</strong></p>
<p>关键字： EditorGUILayout.HelpBox</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;一般提示，你应该这样做...&quot;</span>, MessageType.Info);</span><br><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;警告提示，你可能需要这样做...&quot;</span>, MessageType.Warning);</span><br><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;错误提示，你不能这样做...&quot;</span>, MessageType.Error);</span><br></pre></td></tr></table></figure>

<p><strong>Space</strong></p>
<p>关键字：EditorGUILayout.Space，GUILayout.FlexibleSpace</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;----上面的Label----&quot;</span>);</span><br><span class="line">EditorGUILayout.Space(<span class="number">10</span>); <span class="comment">//进行10个单位的间隔</span></span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;----下面的Label----&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始水平布局</span></span><br><span class="line">EditorGUILayout.BeginHorizontal();</span><br><span class="line"><span class="comment">//固定button长度： 200</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;1号button&quot;</span>, GUILayout.Width(<span class="number">200</span>));</span><br><span class="line"><span class="comment">// 自动填充间隔，如果窗口宽600px，那这种写法就是：【左button：200px】【自动间隔：200px】【右button ：200px】</span></span><br><span class="line">GUILayout.FlexibleSpace();</span><br><span class="line"><span class="comment">//固定button长度： 200</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;2号button&quot;</span>, GUILayout.Width(<span class="number">200</span>));</span><br><span class="line"><span class="comment">//结束水平布局</span></span><br><span class="line">EditorGUILayout.EndHorizontal();</span><br></pre></td></tr></table></figure>

<h3 id="Handles"><a href="#Handles" class="headerlink" title="Handles"></a>Handles</h3><p>Handles是Unity在场景视图中，用于操控物体的3D控制器，已内置许多操作GUI，比如我们熟悉的基于Transform对位置、缩放、旋转坐标的操作工具。</p>
<h4 id="基于Editor类的OnSceneGUI"><a href="#基于Editor类的OnSceneGUI" class="headerlink" title="基于Editor类的OnSceneGUI"></a>基于Editor类的OnSceneGUI</h4><p>在继承自Editor的类中，可以定义【OnSceneGUI()】</p>
<p>这样当此Edtior在活跃状态时（比如一个Inspector面板展开），在【OnSceneGUI()】方法内的内容将根据SceneView的刷新而调用，触发对应逻辑。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">------HandlesMono .cs------</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HandlesMono</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------HandlesMonoEditor.cs------</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line">[<span class="meta">CustomEditor(typeof(HandlesMono))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HandlesMonoEditor</span> : <span class="title">Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSceneGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;在Editor OnSceneGUI中 调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在【Hierarchy】中新建空对象，挂载脚本，点击对象在【Inspector】中显示【HandlesMono】信息，就可以看见信息打印：</p>
<p>当然，我们使用自定义的Editor，定义自己的Handle GUI操作显示也是可能的。这种GUIs将会非常有用于程序化生成的场景内容、“不可见”的子对象与组。比如路径点与坐标标记点。</p>
<p>如果在【Hierarchy】中不选择对应物体，则【HandlesMono】不在检视器中显示，意味着【HandlesMono】 Disable掉了，将不会调用【OnSceneGUI】，读者可自行尝试。</p>
<p>（Tips：如果想要它一直调用，但是又需要选择其他对象怎么办呢？可以点击【Inspector】右侧的【锁】按钮，加锁之后只会显示当前的【Inspector】信息，不会随着选择而更改。）</p>
<h4 id="基于EditorWindow的手动注册"><a href="#基于EditorWindow的手动注册" class="headerlink" title="基于EditorWindow的手动注册"></a>基于EditorWindow的手动注册</h4><p>有些时候，我们更想在一个Window中进行数据编辑与操作，但是EditorWindow可没有OnSceneGUI，怎么办呢？这时候，需要手动对SceneView的刷新事件进行注册了。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HandlesWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HandlesWindow m_mainWindow;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;MyWindows/HandlesWindow&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>() <span class="comment">//打开窗口</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        m_mainWindow = EditorWindow.GetWindow&lt;HandlesWindow&gt;();</span><br><span class="line">        m_mainWindow.Show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui += OnSceneGUI; <span class="comment">//对SceneView的刷新事件进行注册</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui -= OnSceneGUI; <span class="comment">//对SceneView的刷新事件取消注册</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSceneGUI</span>(<span class="params">SceneView sceneView</span>) <span class="comment">//自定义刷新事件的委托方法</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;在 Window OnSceneGUI中 调用....&quot;</span>); <span class="comment">//具体逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Handles基本绘制方法"><a href="#Handles基本绘制方法" class="headerlink" title="Handles基本绘制方法"></a>Handles基本绘制方法</h4><p><strong>Label</strong></p>
<p>关键字： Handles.Label</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Vector3 labelPos = Vector3.zero;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> labelText = <span class="string">&quot;这是在Handles中绘制的文本信息！！！&quot;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">//Window GUI 绘制（使用EditorGUILayout）</span></span><br><span class="line">...</span><br><span class="line">Handles.Label(labelPos, labelText); <span class="comment">// 绘制Label</span></span><br></pre></td></tr></table></figure>

<p><strong>Line&#x2F;Dotted Line</strong></p>
<p>关键字： Handles.DrawLine，Handles.DrawDottedLine</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.from 2.to 3.thickness（厚度）决定线段厚度</span></span><br><span class="line">Handles.DrawLine(Vector3.zero, <span class="keyword">new</span> Vector3(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="number">2f</span>);</span><br><span class="line"><span class="comment">//1.from 2.to 3.ScreenSpaceSize（屏幕空间大小）决定虚线长度</span></span><br><span class="line">Handles.DrawDottedLine(Vector3.zero, Vector3.one, <span class="number">2f</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Arc&#x2F;Disc</strong></p>
<p>关键字：Handles.DrawWireArc，Handles.DrawSolidDisc</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Handles.color = <span class="keyword">new</span> Color(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3f</span>); <span class="comment">//提前使用Color进行颜色设置，便于观察</span></span><br><span class="line">Handles.DrawWireArc(Vector3.zero, Vector3.up, Vector3.right, <span class="number">90</span>, <span class="number">2</span>); <span class="comment">//绘制线框弧线</span></span><br><span class="line">Handles.DrawSolidArc(Vector3.zero, Vector3.up, Vector3.back, <span class="number">90</span>, <span class="number">2</span>); <span class="comment">// 绘制填充弧线</span></span><br><span class="line"></span><br><span class="line">Handles.color = <span class="keyword">new</span> Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0.3f</span>);</span><br><span class="line">Handles.DrawSolidDisc(<span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>), Vector3.up, <span class="number">5</span>); <span class="comment">//绘制填充圆环</span></span><br><span class="line">Handles.DrawWireDisc(<span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-5</span>), Vector3.up, <span class="number">5</span>); <span class="comment">//绘制线框圆环</span></span><br></pre></td></tr></table></figure>

<p><strong>Rectangle</strong></p>
<p>关键字：Handles.DrawSolidRectangleWithOutline</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Handles.DrawSolidRectangleWithOutline(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>), Color.green, Color.red);</span><br></pre></td></tr></table></figure>

<p><strong>GUI</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Handles.BeginGUI();</span><br><span class="line">GUILayout.Label(<span class="string">&quot;我是SceneView中的Label&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;我是SceneView中的Button&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;芜湖&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Handles.EndGUI();</span><br></pre></td></tr></table></figure>

<h4 id="控制柄"><a href="#控制柄" class="headerlink" title="控制柄"></a>控制柄</h4><p>实际上，Handles核心功能是他的Handle（控制）类，比如：Handles.PositionHandle就是一个类似于Position移动的方法。经典使用例就是在一个List<Vector3>列表中，选择某个列表元素显示他的Position控制柄，然后进行移动。</p>
<p>但是笔者现阶段使用的较少，不是很熟悉，就不作解释了。</p>
<p>实际上，OnGUIScene + Handles还有一种应用就是“地形笔刷”，就像Terrain笔刷那样在SceneView里面刷刷刷调整高度、生成植被，这种功能我们也是能自己写一套的，核心是编辑模式下的Event事件。</p>
<h3 id="Gizmos-Debug"><a href="#Gizmos-Debug" class="headerlink" title="Gizmos&#x2F;Debug"></a>Gizmos&#x2F;Debug</h3><p>Gizmos与Handles类允许你在“SceneView”（场景视图）与“GameView”（游戏视图）中绘制线段与图形，或是可交互控制柄（比如Transform移动的三轴箭头）。这两者一同作用，能让用户在这些视图中自定义扩展显示信息，或是构建自己喜欢的编辑、操作工具。比如，相比起在Inspector（检视器）中输入数字，你可以在游戏里创建一个可拖拽的圆环附着在NPC上，这代表了NPC发现玩家的视听检测范围。</p>
<p>关键字： MonoBehaviour.OnDrawGizmos， MonoBehaviour.OnDrawGizmosSelected</p>
<p>Gizmos能且只能在MonoBehaviour相关子类中，使用特定的函数调用，其中：</p>
<p><code>OnDrawGizmos()</code> 在每帧调佣。所有在OnDrawGizmos中的渲染都是可见的。</p>
<p><code>OnDrawGizmosSelected()</code> 仅在脚本附加的物体被选择时调用。</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GizmosTutotial</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Vector3 size = <span class="keyword">new</span> Vector3(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>); <span class="comment">//定义Cube大小</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>() <span class="comment">//定义OnDrawGizmos方法，类似于Start，Update的定义方式</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Gizmos.DrawCube(Vector3.zero, size); <span class="comment">//使用Gizmos绘制一个Cube</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="EditorUtility，-AssetDatabase，-Selection"><a href="#EditorUtility，-AssetDatabase，-Selection" class="headerlink" title="EditorUtility， AssetDatabase， Selection"></a>EditorUtility， AssetDatabase， Selection</h3><h4 id="EditorUtility"><a href="#EditorUtility" class="headerlink" title="EditorUtility"></a>EditorUtility</h4><p>EditorUtility 是 Unity内置的关于编辑器使用的一些工具类。</p>
<p><strong>RevealFinder</strong></p>
<p><code>RevealFinder()</code>: 打开特定文件目录</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtension/Menu/Open PersistentDataPath&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenPersistentDataPath</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    EditorUtility.RevealFinder(Application.persistentDataPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtension/Menu/Open DesignerFolder&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenDesignerFolder</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">	EditorUtility.RevealFinder(Application.dataPath.Replace(<span class="string">&quot;Assets&quot;</span>, <span class="string">&quot;Library&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AssetDatabase ： 在编辑器模式下，对项目资源的管理</p>
<p>Selection : 含有当前选择的资源文件&#x2F;文件夹的各种信息。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a><strong>参考链接</strong></h2><p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/SpecialFolders.html">Unity 官方文档: 特殊文件夹</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Rect.html">Unity 官方文档: Rect</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Gizmos.html">Unity 官方文档: Gizmos</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">Unity 官方文档: Handles</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/503154643">知乎: Unity3d Editor 编辑器扩展功能详解</a></p>


      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            发布于&nbsp;
            <time datetime="2024-09-28T13:00:00.000Z" itemprop="datePublished">
              2024-09-28
            </time>
          </div>
          
            <div>
              tags: 
  <li class="meta-text">
  { <a href="/tags/unity/">unity</a> }
  </li>


            </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>© 2024 - Soryu Ryouji </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>